<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Lesson Tracker</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css')}}"
    />
  </head>
  <body>
    <div class="container">
      <div class="content">
        <h1>Lesson Tracker</h1>
        {% if error_message %}
        <h2>{{ error_message }}</h2>
        {% endif %}
        <form action="/add_lesson" method="post">
          <input
            type="number"
            name="time"
            step="0.5"
            min="0"
            max="24"
            value="0"
          />
          <input type="text" name="content" />
          <input type="submit" value="Add Lesson" />
        </form>
      </div>

      <table>
        <tr>
          <th>ID</th>
          <th>Time</th>
          <th>Content</th>
        </tr>
        {% for lesson in lessons %}
        <tr>
          <td>{{ lesson.id }}</td>
          <td>{{ lesson.time }}</td>
          <td>{{ lesson.content }}</td>
        </tr>
        {% endfor %}
      </table>
      <div id="hour-container" data-total-hours="{{ time_to_display }}"></div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const container = document.getElementById("hour-container");
        const totalHours = parseFloat(
          container.getAttribute("data-total-hours")
        );
        const totalSquares = 10000;
        const filledUntil = totalSquares - totalHours;

        for (let i = 0; i < totalSquares; i++) {
          const square = document.createElement("div");
          square.className = "hour-square";
          if (i >= filledUntil) {
            square.classList.add("hour-square-filled");
          }
          container.appendChild(square);
        }
      });
    </script>
  </body>
</html>
